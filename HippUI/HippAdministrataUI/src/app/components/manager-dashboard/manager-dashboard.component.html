<div class="manager-dashboard">
  <aside class="sidebar" [class.collapsed]="sidebarCollapsed">
    <div class="sidebar-header">
      <img class="logo" 
     [src]="sidebarCollapsed ? 'https://res.cloudinary.com/dhpok6wna/image/upload/c_crop,w_200,h_250/v1739372570/Untitled_design__2_-removebg-preview_qk06l1.png' 
                             : 'https://res.cloudinary.com/dpha0wzqx/image/upload/v1739367747/full_photo-removebg-preview_dbmpcf.png'" 
     alt="HIPP Logo">
      <button id="toggle-sidebar" (click)="toggleSidebar()">
        <img [src]="sidebarCollapsed ? 'https://res.cloudinary.com/dpha0wzqx/image/upload/c_pad,w_24,h_24/v1739367333/sidebar_znafqx.png' 
        : 'https://res.cloudinary.com/dpha0wzqx/image/upload/c_pad,w_24,h_24/v1739367333/sidebar_1_brovsh.png'" 
        alt="Toggle Sidebar">
      </button>
    </div>
    <h2>Manager Dashboard</h2>
    <ul class="navigation">
      <li>
        <button
          [class.active]="activeSection === 'products'"
          (click)="navigateTo('products')"
        >
          Product Dashboard
        </button>
      </li>
      <li>
        <button
          [class.active]="activeSection === 'orders'"
          (click)="navigateTo('orders')"
        >
          Order Dashboard
        </button>
      </li>
      <li>
        <button
          [class.active]="activeSection === 'orderRequests'"
          (click)="openOrderRequestsModal()"
        >
          Order Requests
        </button>
      </li>      
    </ul>
    <button class="logout-button" (click)="logout()"><img class="logout-image" src="https://res.cloudinary.com/dhpok6wna/image/upload/c_pad,w_24,h_24/v1739374830/logout_rjfkqz.png" alt=""><span class="tooltip">Log out</span></button>

  </aside>
  <div class="dashboard-container">
    <app-notification></app-notification>

    <main class="content">
      
      <div class="charts">
        <div class="chart-container">
          <h2>Product Quantities</h2>
          <canvas id="productChart"></canvas>
        </div>
        <div class="chart-container">
          <h2>Monthly Revenue</h2>
          <canvas id="revenueChart"></canvas>
        </div>
        <div class="chart-container">
          <h3>Revenue Share by Product</h3>
          <canvas id="revenueShareChart"></canvas>
        </div>
        <div class="chart-container">
          <h2>Top Performing Products</h2>
          <canvas id="topProductsChart"></canvas>
        </div>
      </div>
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
<button (click)="openOrderRequestsModal()">View Order Requests</button>

<!-- Modal -->
<div *ngIf="isOrderRequestsModalOpen" class="modal-overlay">
  <div class="modal-content">
    <h2>Pending Order Requests</h2>
    <button (click)="closeOrderRequestsModal()">âœ–</button>
    
    <div *ngIf="orderRequests.length > 0; else noRequests">
      <ul>
        <li *ngFor="let request of orderRequests">
          Order ID: {{ request.orderId }} - {{ request.status }}
          <button (click)="approveRequest(request.id)">Approve</button>
          <button (click)="rejectRequest(request.id)">Reject</button>
        </li>
      </ul>
    </div>

    <ng-template #noRequests>
      <p>No pending requests.</p>
    </ng-template>
  </div>
</div>

